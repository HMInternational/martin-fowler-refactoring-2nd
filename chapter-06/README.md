# 기본적인 리팩토링

> 내가 가장 많이 사용하는 리팩토링은 함수 추출하기와 변수 추출하기 이다. 리팩터링은 본래 코드를 변경하는 작업인 만큼, 이 두 리팩터리은 반대로 진행하는 함수 인라인하기와 변수 인라인하기도 자주 사용한다.

> 함수 구성과 이름 짓기는 가장 기본적인 저수준 리팩터링이다. 그런데 일단 함수를 만들고 나면 다시 고수준 모듈로 묶어야 한다. 이렇게 함수를 그룹으로 묶을 때는 여러 함수를 클래스로 묶기를 이용한다. 


## table of contents
- 함수 추출하기
- 함수 인라인하기



## 함수 추출하기

### 배경
> 함수 추출하기는 내가 가장 많이 사용하는 리팩터링 중 하나다. 코드 조각을 찾아 무슨 일을 하는지 파악한 다음, 독립된 함수로 추출하고 목적에 맞는 이름을 붙인다. 

코드 조각을 찾아 무슨일을 하는지 파악한 다음, 독립된 함수로 추출하고 목적에 맞는 이름을 붙인다.

### 독립된 함수로 코드를 묶어야 할 때
코드를 언제 독립된 함수로 묶어야 할지에 관한 의견은 수없이 많다.
하지만 내 눈에는 목적과 구현을 분리하는 방식이 가장 합리적인 기준으로 보인다. 코드를 보고, 무슨 일을 하는지 파악하는 데 한참이 걸린다면 그 부분을 함수로 추출한 뒤 무슨 일에 걸맞는 이름을 짓는다. 이렇게 해두면 나중에 코드를 다시 읽을 때 함수의 목적이 눈에 확 들어오고, 본문 코드에 대해서는 더 이상 신경 쓸 일이 거의 없다.

**목적(강조)과 구현(반전)을 분리하는 방식**


함수를 짧게 만들면 함수 호출이 많아져서 성능이 느려질까 걱정하는 사람도 있다. 내가 젊던 시절에는 간혹 문제가 되긴 했지만 요즘은 그럴 일이 거의 없다. 함수가 짧으면 캐싱하기가 더 쉽기 때문에 컴파일러가 최적화하는 데 유리할 때가 많다. 성능 최적화에 대해서는 항상 일반적인 지침을 따르도록 하자.  
**짧은 함수의 이점은 이름을 잘 지어야만 발휘**되므로 이름 짓기에 특별히 신경써야 한다. 이름을 잘 짓기까지는 어느 정도 훈련이 필요하다. 하지만 일단 요령을 터득한 후에는 별도 문서 없이 코드 자체만으로 내용을 충분히 설명되게 만들 수 있다.   
긴 함수에는 각각의 코드 덩어리 첫머리에 그 목적을 설명하는 주석이 달려있을 때가 많다. 해당 코드 덩어리를 추출한 함수의 이름을 지을 때 이 주석을 참고하면 도움이 될 것이다.  


#### 최적화에 대한 일반적인 지침
**첫째.** 하지마라
**둘째.** (전문가 한정). 아직 하지 마라.




### 오리지널 스몰토크 시스템
